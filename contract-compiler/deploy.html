<html>
<head>
  <script src="web3.min.js"></script>
  <script>
  _source = "0x" + "60606040523415600e57600080fd5b607b8061001c6000396000f300606060405263ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663e2179b8e8114603b57600080fd5b3415604557600080fd5b604b604d565b005b5600a165627a7a72305820ccd658c776926882a43769f9fcc2ea162fb70c1b9e5786dc4b05333da2325b6a0029";
  _abi = JSON.parse("[{\"constant\":false,\"inputs\":[],\"name\":\"g\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]");

  window.addEventListener('load', function() {
    // Checking if Web3 has been injected by the browser (Mist/MetaMask)
    if (typeof web3 !== 'undefined') {
      // Use Mist/MetaMask's provider
      window.web3 = new Web3(web3.currentProvider);
    } else {
      console.log('No web3? You should consider trying MetaMask!')
      // fallback - use your fallback strategy (local node / hosted node + in-dapp id mgmt / fail)
      window.web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
    }

    // Now you can start your app & access web3 freely:
    startApp()
  });

  function startApp() {
    web3.eth.getAccounts((err, accounts) => {
      account = accounts[0]
      console.log(account);

      var contract = web3.eth.contract(_abi)
      contract.new({
        from: account,
        data: _source,
        gas: '100000'
      }, (err, contract) => {
        console.log(contract);
        if (typeof contract.address !== 'undefined') {
          console.log('Mined', contract.address, contract.transactionHash);
        }
      })
    })
  };
  </script>
</head>
<body>
  hi there!
</body>
</html>
